/*! recurve.js - v0.1.0 - by Sebastien Couture 2014-09-07 */!function(a){"use strict";function b(a,b){return b<a.length?Array.prototype.slice.call(a,b):[]}function c(a,b,c){if(a&&b){if(a.forEach&&a.forEach===Object.forEach)a.forEach(b,c);else if(k(a)){for(var d=0;d<a.length;d++)if(!1===b.call(c,a[d],d,a))return}else for(var e=Object.keys(a),d=0;d<e.length;d++){var f=e[d];if(!1===b.call(c,a[f],f,a))return}return e}}function d(a,b,c){if(a){if(!k(a))return c===a[b]?a[b]:null;for(var d=0;d<a.length;d++){var e=a[d];if(b&&j(e)&&e[b]===c)return e;if(e===c)return e}return null}}function e(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(f(a)&&f(b))return!0;if(!g(a,b))return!1;if(!j(a))return!1;if(!k(a)){if(m(a))return a.getTime()==b.getTime();var c={};for(var d in a)if(!l(a[d])){if(!e(a[d],b[d]))return!1;c[d]=!0}for(var d in b)if(!l(b[d])&&!c.hasOwnProperty(d))return!1;return!0}if(a.length==b.length){for(var h=0;h<a.length;h++)if(!e(a[h],b[h]))return!1;return!0}return!1}function f(a){return a!==a}function g(a,b){return typeof a==typeof b}function h(a){return a instanceof String||"string"==typeof a}function i(a){return a instanceof Error}function j(a){return a===Object(a)}function k(a){return a instanceof Array}function l(a){return"function"==typeof a}function m(a){return a instanceof Date}function n(a){return"number"==typeof a}function o(a,b){if(a&&b){for(var c in b)a[c]=b[c];return a}}function p(a){return j(a)?k(a)?a.splice():o({},a):a}function q(a){if(!j(a))throw new Error("not an object to convert to JSON");return JSON.stringify(a)}function r(a){return a?JSON.parse(a):null}function s(a){if(!a)return null;Array.prototype.shift.apply(arguments);for(var b=0;b<arguments.length;b++){var c="{"+b+"}";a=a.replace(c,arguments[b])}return a}function t(a,b){if(!a)throw Array.prototype.shift.apply(arguments),b=s.apply(this,arguments),new Error(b)}function u(a){o(a,{forEach:c,extend:o,clone:p,find:d,areEqual:e,isNaN:f,isSameType:g,isString:h,isError:i,isObject:j,isArray:k,isFunction:l,isDate:m,isNumber:n,toJson:q,fromJson:r,assert:t}),a.module=w(),a.createModule=function(b){return b&&-1==b.indexOf(a.module)&&b.unshift(a.module),w(b)},a.createContainer=v}function v(a){function d(a,b,c){var d=a.map(function(a){return g(a)});b.apply(c,d)}function e(){c(j,function(a,b){g(b)})}function f(a,b,c){void 0===c&&(c=[]);var d=a.map(function(a){return g(a)}),e=Object.create(b.prototype);return e=b.apply(e,d.concat(c))||e}function g(a){if(i[a])return i[a];var c=j[a];if(t(c,"no service exists with the name {0}",a),0<=l.indexOf(a)){var e=l.join(" -> ");l=[],t(!1,"circular dependency detected: "+e)}return l.push(a),i[a]="type"===c.type?f(c.dependencies,c.value):"typeFactory"===c.type?{create:function(){return f(c.dependencies,c.value,b(arguments))}}:"factory"===c.type?d(c.dependencies,c.value):c.value,h(a),l.pop(a),i[a]}function h(a){var b=k[a];if(b){var c=b.dependencies.map(function(a){return g(a)});i[a]=b.value.apply(null,[i[a]].concat(c))}}var i=[],j={},k={};c(a,function(a){a.resolveDependencies(),j=o(j,a.getServices()),k=o(k,a.getDecorators())});var l=[];return{invoke:d,invokeAll:e,instantiate:f,get:g}}function w(a){var b={},d={};return{factory:function(a,c,d){return t(a,"factory service requires a name"),t(l(d),"factory services requires a function provider"),b[a]={dependencies:c,value:d,type:"factory"},this},type:function(a,c,d){return t(a,"type service requires a name"),t(l(d),"type service requires a function constructor provider"),b[a]={dependencies:c,value:d,type:"type"},this},typeFactory:function(a,c,d){return t(a,"typeFactory service requires a name"),t(l(d),"typeFactory service requires a function constructor provider"),b[a]={dependencies:c,value:d,type:"typeFactory"},this},value:function(a,c){return t(a,"value service requires a name"),b[a]={value:c,type:"value"},this},decorator:function(a,b,c){return t(a,"decorator service requires a name"),t(l(c),"decorator service requires a function provider"),d[a]={dependencies:b,value:c,type:"decorator"},this},config:function(a,b){return t(a,"config service requires a name"),this.value("config."+a,b),this},resolveDependencies:function(){var e={},f={};c(a,function(a){c(a.getServices(),function(a,b){e[b]=a}),c(a.getDecorators(),function(a,b){f[b]=a})}),b=o(e,b),d=o(f,d)},getServices:function(){return b},getDecorators:function(){return d}}}var x=a.recurve||(a.recurve={});t=o(t,{ok:function(){t.apply(this,arguments)},equal:function(a,c){var d=b(arguments,2);t.apply(this,[a==c].concat(d))},notEqual:function(a,c){var d=b(arguments,2);t.apply(this,[a!=c].concat(d))},strictEqual:function(a,c){var d=b(arguments,2);t.apply(this,[a===c].concat(d))},strictNotEqual:function(a,c){var d=b(arguments,2);t.apply(this,[a!==c].concat(d))},deepEqual:function(a,c){var d=b(arguments,2);t.apply(this,[ObjectUtils.areEqual(a,c)].concat(d))},deepNotEqual:function(a,c){var d=b(arguments,2);t.apply(this,[!ObjectUtils.areEqual(a,c)].concat(d))}}),u(x)}(window);