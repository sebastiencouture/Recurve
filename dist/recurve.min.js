/*! Recurve.js - v0.1.0 - by Sebastien Couture 2014-08-14 */!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){!function(){"use strict";var b=window.Recurve||{};b.StringUtils=a("./utils/string.js"),b.WindowUtils=a("./utils/window.js"),b.ArrayUtils=a("./utils/array.js"),b.DateUtils=a("./utils/date.js"),b.ObjectUtils=a("./utils/object.js"),b.assert=a("./assert.js"),b.Proto=a("./proto.js"),b.Cache=a("./cache.js"),b.Log=a("./log/log.js"),b.LogConsoleTarget=a("./log/log-console.js"),b.Signal=a("./signal.js"),b.Http=a("./http/http.js"),b.GlobalErrorHandler=a("./global-error-handler.js"),b.LocalStorage=a("./storage/local-storage.js"),b.SessionStorage=a("./storage/session-storage.js"),b.PerformanceMonitor=a("./performance-monitor.js"),b.LazyLoad=a("./lazy-load.js"),b.Cookies=a("./cookies.js"),window.Recurve=b}()},{"./assert.js":2,"./cache.js":3,"./cookies.js":4,"./global-error-handler.js":5,"./http/http.js":10,"./lazy-load.js":11,"./log/log-console.js":12,"./log/log.js":13,"./performance-monitor.js":14,"./proto.js":15,"./signal.js":16,"./storage/local-storage.js":17,"./storage/session-storage.js":18,"./utils/array.js":20,"./utils/date.js":21,"./utils/object.js":23,"./utils/string.js":24,"./utils/window.js":26}],2:[function(a,b){"use strict";var c=a("./utils/string.js"),d=a("./utils/object.js"),e=a("./utils/array.js"),f=function(a,b){if(!a)throw Array.prototype.shift.apply(arguments),b=c.format.apply(this,arguments),new Error(b)};f=d.extend(f,{ok:function(){f.apply(this,arguments)},equal:function(a,b){var c=e.argumentsToArray(arguments,2);f.apply(this,[a==b].concat(c))},notEqual:function(a,b){var c=e.argumentsToArray(arguments,2);f.apply(this,[a!=b].concat(c))},strictEqual:function(a,b){var c=e.argumentsToArray(arguments,2);f.apply(this,[a===b].concat(c))},strictNotEqual:function(a,b){var c=e.argumentsToArray(arguments,2);f.apply(this,[a!==b].concat(c))},deepEqual:function(a,b){var c=e.argumentsToArray(arguments,2);f.apply(this,[d.areEqual(a,b)].concat(c))},deepNotEqual:function(a,b){var c=e.argumentsToArray(arguments,2);f.apply(this,[!d.areEqual(a,b)].concat(c))}}),b.exports=f},{"./utils/array.js":20,"./utils/object.js":23,"./utils/string.js":24}],3:[function(a,b){"use strict";var c=a("./proto.js"),d=a("./utils/object.js"),e=a("./utils/date.js"),f=a("./assert.js");b.exports=c.define([function(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this._countLimit=a,this._totalCostLimit=b,this._cache={}},{get:function(a){f(a,"key must be set");var b=this._cache[a];return b?b.value:null},set:function(a,b,c){f(a,"key must be set"),void 0===c&&(c=0),this._cache[a]={value:b,cost:c},(this._countLimit||this._totalCostLimit&&c)&&this._evict()},remove:function(a){f(a,"key must be set"),delete this._cache[a]},exists:function(a){return f(a,"key must be set"),this._cache[a]?!0:!1},clear:function(){this._cache={}},setCountLimit:function(a){this._countLimit=a,this._evict()},countLimit:function(){return this._countLimit},setTotalCostLimit:function(a){this._totalCostLimit=a,this._evict()},totalCostLimit:function(){return this._totalCostLimit},forEach:function(a){f(a,"iterator must be set"),d.forEach(this._cache,a)},_currentTotalCost:function(){var a=0;return d.forEach(this._cache,function(b){a+=b.cost}),a},_currentCount:function(){return d.keyCount(this._cache)},_evict:function(){this._shouldEvict()&&(this._evictMostCostly(),this._evict())},_shouldEvict:function(){return this._countLimit<this._currentCount()||this._totalCostLimit<this._currentTotalCost()},_evictMostCostly:function(){var a,b=0;d.forEach(this._cache,function(c,d){a?b<c.cost&&(a=d):a=d}),this.remove(a)}},{inverseCurrentTimeCost:function(){return 1/e.now()},currentTimeCost:function(){return e.now()}}])},{"./assert.js":2,"./proto.js":15,"./utils/date.js":21,"./utils/object.js":23}],4:[function(a,b){"use strict";function c(a){var b=document.cookie?document.cookie.split(";"):[];f.forEach(b,function(b){b=b.trim();var c=decodeURIComponent(g.beforeSeparator(b,"="));a(b,c)})}function d(a){var b=f.isObject(a)?JSON.stringify(a):String(a);return encodeURIComponent(b)}function e(a){if(!f.isString(a))return null;0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a),JSON.parse(a)}catch(b){return a}}var f=a("./utils/object.js"),g=a("./utils/string.js"),h=a("./utils/date.js"),i=a("./assert.js");b.exports={get:function(a){i(a,"key must be set");var b=null;return c(function(c,d){if(d===a){var f=g.afterSeparator(c,"=");return b=e(f),!1}}),b},set:function(a,b,c){i(a,"key must be set"),void 0===c&&(c={}),f.isNumber(c.expires)&&(c.expires=h.addDaysFromNow(c.expires));var e=encodeURIComponent(a)+"="+d(b);f.isDate(c.expires)&&(e+="; expires="+c.expires.toUTCString()),c.domain&&(e+="; domain="+c.domain),c.path&&(e+="; path="+c.path),c.secure&&(e+="; secure"),document.cookie=e},remove:function(a,b){if(i(a,"key must be set"),void 0===b&&(b={}),!this.exists(a))return!1;var c=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT";return b.domain&&(c+="; domain="+b.domain),b.path&&(c+="; path="+b.path),document.cookie=c,!0},exists:function(a){var b=!1;return c(function(c,d){return d===a?(b=!0,!1):void 0}),b},forEach:function(a){i(a,"iterator must be set"),c(function(b,c){var d=g.afterSeparator(b,"="),f=e(d);a(f,c,b)})}}},{"./assert.js":2,"./utils/date.js":21,"./utils/object.js":23,"./utils/string.js":24}],5:[function(a,b){"use strict";var c=a("./proto.js"),d=a("./utils/string.js"),e=a("./utils/object.js"),f=a("./utils/array.js");b.exports=c.define([function(a,b,c){void 0===b&&(b=!0),void 0===c&&(c=!0),this._enabled=b,this._preventBrowserHandle=c,this._onError=a,window.onerror=this._errorHandler.bind(this)},{protectedInvoke:function(a){try{var b=f.argumentsToArray(arguments,1);a.apply(null,b)}catch(c){var d=this.describeError(c);this.handleError(c,d)}},handleError:function(a,b){return this._onError&&this._onError(a,b),this._preventBrowserHandle},describeError:function(a){if(!a)return null;var b;return b=e.isString(a)?a:e.isError(a)?a.message+"\n"+a.stack:e.isObject(a)?JSON.stringify(a):a.toString()},_errorHandler:function(a,b,c,e,f){if(this._enabled){var g=d.format("message: {0}, file: {1}, line: {2}",a,b,c);return f&&(g+=d.format(", stack: {0}",f.stack)),this._onError&&this._onError(f,g),this._preventBrowserHandle}}}])},{"./proto.js":15,"./utils/array.js":20,"./utils/object.js":23,"./utils/string.js":24}],6:[function(a,b){"use strict";var c=(a("../utils/object.js"),a("../utils/string.js"),a("../proto.js")),d=0;b.exports=c.define([function(a,b){this._options=a,this._deferred=b,this._id=d++},{send:function(){function a(d){b.removeEventListener("load",a),b.removeEventListener("error",a),document.head.removeChild(b),b=null,d&&"error"===d.type?c._deferred.reject({status:404,canceled:c._canceled}):c._deferred.resolve({status:200,canceled:c._canceled})}var b=document.createElement("script");b.src=this._options.url,b.async=!0;var c=this;b.addEventListener("load",a),b.addEventListener("error",a),document.head.appendChild(b)},cancel:function(){this._canceled=!0}}])},{"../proto.js":15,"../utils/object.js":23,"../utils/string.js":24}],7:[function(a,b){"use strict";var c=a("../signal.js"),d=a("../proto.js");b.exports=d.define([function(){this._succeeded=new c,this._errored=new c},{resolve:function(a){this._succeeded.trigger(a),this._cleanUp()},reject:function(a){this._errored.trigger(a),this._cleanUp()},promise:{then:function(a,b){this._succeeded.addOnce(a),this._errored.addOnce(b)},success:function(a){this._succeeded.addOnce(function(b){a(b.data,b.status,b.statusText,b.headers,b.options,b.canceled)})},error:function(a){this._errored.addOnce(function(b){a(b.data,b.status,b.statusText,b.headers,b.options,b.canceled)})},cancel:function(){this.request&&this.request.cancel()}},_cleanUp:function(){this._succeeded.removeAll(),this._succeeded=null,this._errored.removeAll(),this._errored=null}}])},{"../proto.js":15,"../signal.js":16}],8:[function(a,b){"use strict";var c=(a("../utils/object.js"),a("../utils/string.js"),a("../utils/url.js")),d=a("../proto.js"),e=0;b.exports=d.define([function(a,b){this._options=a,this._deferred=b,this._id=e++},{send:function(){function a(a){g=!0,h._canceled&&h._options.errorOnCancel?h._complete():h._complete(!0,a,200)}function b(a){f.removeEventListener("load",b),f.removeEventListener("error",b),document.head.removeChild(f),f=null,delete window[d],a&&"load"===a.type&&!g&&h._complete(!1,null,404,"jsonp callback not called")}var d="RecurveJsonPCallback"+this._id,e=c.removeParameterFromUrl(this._options.url,"callback");e=c.addParametersToUrl(e,{callback:d});var f=document.createElement("script");f.src=e,f.type="text/javascript",f.async=!0;var g,h=this;f.addEventListener("load",b),f.addEventListener("error",b),window[d]=a,document.head.appendChild(f)},cancel:function(){this._canceled=!0},_complete:function(a,b,c,d){var e={data:b,status:c,statusText:d,options:this._options,canceled:this._canceled};a?this._deferred.resolve(e):this._deferred.reject(e)}}])},{"../proto.js":15,"../utils/object.js":23,"../utils/string.js":24,"../utils/url.js":25}],9:[function(a,b){"use strict";var c=a("../utils/object.js"),d=a("../utils/string.js"),e=a("../utils/window.js"),f=a("../proto.js"),g=0;b.exports=f.define([function(a,b){this._options=a,this._deferred=b,this._id=g++},{send:function(){if(!window.XMLHttpRequest)throw new Error("Recurve only supports IE8+");this._xhr=new XMLHttpRequest,this._config(),this._xhr.onreadystatechange=c.bind(this._stateChangeHandler,this),this._xhr.open(this._options.method.toUpperCase(),this._options.url,!0),this._options.beforeSend&&this._options.beforeSend(this._xhr,this._options),this._xhr.send(this._options.data)},cancel:function(){this._canceled=!0,this._xhr&&this._xhr.abort()},_config:function(){if(this._addHeaders(),this._options.withCredentials&&(this._xhr.withCredentials=!0),this._options.timeout&&(this._xhr.timeout=this._options.timeout),this._options.responseType)try{this._xhr.responseType=this._options.responseType}catch(a){if(!d.isEqualIgnoreCase("json",this._options.method))throw a}},_addHeaders:function(){c.forEach(this._options.headers,function(a,b){a&&this._xhr.setRequestHeader(b,a)})},_stateChangeHandler:function(){4===this._xhr.readyState&&(this._isSuccess()?this._handleSuccess():this._handleError())},_isSuccess:function(){if(this._canceled&&this._options.errorOnCancel)return!1;var a=this._xhr.status;return a>=200&&300>a||304===a||0===a&&e.isFileProtocol()},_handleSuccess:function(){if(this._options.success){var a;if(d.isEqualIgnoreCase("script",this._options.dataType))a=this._request.responseText,e.globalEval(a);else try{a=this._parseResponse()}catch(b){return void this._handleError("unable to parse response")}this._complete(!0,a)}},_handleError:function(a){this._complete(!1,null,a)},_complete:function(a,b,c){var d={data:b,status:this._xhr.status,statusText:c?c:this._xhr.statusText,headers:this._xhr.getAllResponseHeaders(),options:this._options,canceled:this._canceled};a?this._deferred.resolve(d):this._deferred.reject(d)},_parseResponse:function(){var a=this._options.headers&&this._options.headers.Accept;a||(a=this._xhr.getResponseHeader("content-type"));var b;return c.isFunction(this._options.serializer)?(b=this._options.parser(this._xhr),a):c.forEach(this._options.parser,function(c){b=c(this._xhr,a)}),b}}])},{"../proto.js":15,"../utils/object.js":23,"../utils/string.js":24,"../utils/window.js":26}],10:[function(a){"use strict";function b(a,b){var c=!0;return q.contains(b,"application/x-www-form-urlencoded",c)?p.isObject(a)&&!p.isFile(a)&&(a=p.toFormData(a)):q.contains(b,"application/json",c)&&p.isObject(a)&&!p.isFile(a)&&(a=p.toJson(a)),a}function c(a,b){var c,d=!0;return q.contains(b,"application/xml",d)||q.contains(b,"text/xml",d)?c=a.responseXML:q.contains(b,"application/json",d)?c&&(c=p.toJson(a.responseText)):c=a.responseText,c}function d(a,b){var c;return c=q.isEqualIgnoreCase("jsonp",a.method)?new u(a,b):a.crossDomain&&q.isEqualIgnoreCase("script",a.method)?new v(a,b):new t(a,b)}function e(){return new w}function f(){var a=Q.defer();return a.promise.success=function(b){return a.promise.then(function(a){b(a.data,a.status,a.statusText,a.headers,a.options,a.canceled)}),this._deferred.promise},a.promise.error=function(b){return a.promise.then(null,function(a){b(a.data,a.status,a.statusText,a.headers,a.options,a.canceled)}),this._deferred.promise},a.promise.cancel=function(){a.request.cancel()},a}function g(a,b){var c=p.extend({},b);return c.headers={},h(a.method,c,b.headers),p.extend(c,a),c}function h(a,b,c){a=a.toLowerCase(),p.extend(b,c.all),p.extend(b,c[a])}function i(a){a.cache||(a.params.cache=r.now()),a.url=s.addParametersToUrl(a.url,a.params)}function j(a){k(a),l(a),m(a)}function k(a){if(!a.headers.Accept){var b="*/*",c=a.dataType;c&&(c=c.toLowerCase(),"text"===c?b="text/plain,*/*;q=0.01":"html"===c?b="text/html,*/*;q=0.01":"xml"===c?b="application/xml,text/xml,*/*;q=0.01":("json"===c||"script"===c)&&(b="application/json,text/javascript,*/*;q=0.01")),a.headers.Accept=b}}function l(a){a.crossDomain||a.headers["X-Requested-With"]||q.isEqualIgnoreCase("script",a.dataType)||(a.headers["X-Requested-With"]="XMLHttpRequest")}function m(a){a.data&&p.forEach(a.headers,function(b,c){q.isEqualIgnoreCase("content-type",c)&&delete a.headers[c]})}function n(a){a.emulateHttp&&q.isEqualIgnoreCase("put",a.method)&&q.isEqualIgnoreCase("patch",a.method)&&q.isEqualIgnoreCase("delete",a.method)&&(a.data._method=a.method.toLowerCase())}function o(a){if(a.data){var b=a.data;p.isFunction(a.serializer)?b=a.serializer(b,this._options.contentType):p.forEach(a.serializer,function(c){b=c(b,a.contentType)}),a.data=b}}var p=a("../utils/object.js"),q=a("../utils/string.js"),r=a("../utils/date.js"),s=a("../utils/url.js"),t=a("./http-xhr.js"),u=a("./http-jsonp.js"),v=a("./http-cors-script.js"),w=a("./http-deferred.js"),x={defaults:{headers:{all:{},get:{},post:{"Content-Type":"application/json; charset=UTF-8"},put:{"Content-Type":"application/json; charset=UTF-8"},head:{},"delete":{},jsonp:{},script:{}},method:"get",dataType:"json",cache:!0,serializer:[b],parser:[c],requestFactory:d,deferredFactory:e,errorOnCancel:!0,emulateHttp:!1},request:function(a){var b=g(a,x.defaults);i(b),j(b),n(b),o(b);var c=b.deferredFactory(b),d=b.requestFactory(b,c);return c.request=c,d.send(),c.promise},get:function(a,b){return b=p.extend(b,{method:"get",url:a}),this.request(b)},post:function(a,b,c){return c=p.extend(c,{method:"post",url:a,data:b}),this.request(c)},jsonp:function(a,b){return b=p.extend(b,{method:"jsonp",url:a}),this.request(b)},"delete":function(a,b){return b=p.extend(b,{method:"delete",url:a}),this.request(b)},head:function(a,b){return b=p.extend(b,{method:"head",url:a}),this.request(b)},put:function(a,b,c){return c=p.extend(c,{method:"put",url:a,data:b}),this.request(c)},patch:function(a,b,c){return c=p.extend(c,{method:"patch",url:a,data:b}),this.request(c)},getScript:function(a,b){return b=p.extend(b,{method:"script",url:a}),this.request(b)}};x.serializer=b,x.parser=c,x.RequestFactory=d,x.DeferredFactory=e,x.QDeferredFactory=f},{"../utils/date.js":21,"../utils/object.js":23,"../utils/string.js":24,"../utils/url.js":25,"./http-cors-script.js":6,"./http-deferred.js":7,"./http-jsonp.js":8,"./http-xhr.js":9}],11:[function(a,b){"use strict";function c(a,b,c){function f(){(e.isEqualIgnoreCase("loaded",a.readyState)||e.isEqualIgnoreCase("complete",a.readyState))&&g()}function g(){i(),b()}function h(a){i(),c(a)}function i(){a.onload=null,a.onreadystatechange=null,a.onerror=null}a.async=!1,a.defer=!1,d.elementSupportsOnEvent(a,"onreadystatechange")?a.onreadystatechange=f:a.onload=g,a.onerror=h,document.head.appendChild(a)}var d=a("./utils/dom.js"),e=a("./utils/string.js");b.exports={js:function(a,b,e){var f=d.createElement("link",{type:"text/css",rel:"stylesheet",href:a});c(f,b,e)},css:function(a,b,e){var f=d.createElement("script",{type:"text/javascript",src:a});c(f,b,e)}}},{"./utils/dom.js":22,"./utils/string.js":24}],12:[function(a,b){"use strict";var c=a("../proto.js");b.exports=c.define([function(){},{info:function(){console&&console.log.apply(console,arguments)},debug:function(){return console&&console.debug?void console.debug.apply(console,arguments):void this.info.apply(this,arguments)},warn:function(){return console&&console.warn?void console.warn.apply(console,arguments):void this.info.apply(this,arguments)},error:function(){return console&&console.error?void console.error.apply(console,arguments):void this.info.apply(this,arguments)},clear:function(){console&&console.clear()}}])},{"../proto.js":15}],13:[function(a,b){"use strict";var c=a("../proto.js"),d=a("../utils/array.js"),e=a("../utils/string.js"),f=a("./log-console.js");b.exports=c.define([function(a,b){void 0===a&&(a=!0),void 0===b&&(b=[new f]),this.targets=b,this.disable(!a)},{info:function(a){this._infoDisabled||this._log("info",a,arguments)},debug:function(a){this._debugDisabled||this._log("debug",a,arguments)},warn:function(a){this._warnDisabled||this._log("warn",a,arguments)},error:function(a){this._errorDisabled||this._log("error",a,arguments)},clear:function(){for(var a=0;a<this.targets.length;a++)this.targets[a].clear()},disable:function(a){void 0===a&&(a=!0),this._debugDisabled=a,this._infoDisabled=a,this._warnDisabled=a,this._errorDisabled=a},debugDisable:function(a){void 0===a&&(a=!0),this._debugDisabled=a},infoDisable:function(a){void 0===a&&(a=!0),this._infoDisabled=a},warnDisable:function(a){void 0===a&&(a=!0),this._warnDisabled=a},errorDisable:function(a){void 0===a&&(a=!0),this._errorDisabled=a},_log:function(a,b,c){c=d.argumentsToArray(c,1);for(var e=this._description(a.toUpperCase()),f=0;f<this.targets.length;f++)this.targets[f][a].apply(this.targets[f],[e,b].concat(c))},_description:function(a){var b=e.formatTime(new Date);return"["+a+"] "+b}}])},{"../proto.js":15,"../utils/array.js":20,"../utils/string.js":24,"./log-console.js":12}],14:[function(a,b){"use strict";function c(){return console&&console.time&&console.timeEnd}var d=a("./proto.js"),e=a("./utils/date.js"),f=a("./log/log.js");b.exports=d.define([function(a,b){void 0===a&&(this._log=new f),void 0===b&&(b=!0),this.disable(!b)},{start:function(a){return this._disabled?void 0:new g(this._log,a)},end:function(a,b){!this._disabled&&a&&a.end(b)},disable:function(a){void 0===a&&(a=!0),this._disabled=a}}]);var g=d.define([function(){},{start:function(a,b){this._log=a,c()?console.time(b):this._startTime=e.performanceNow(),this._message=b},end:function(a){c()?console.timeEnd(this._message):this._log.info(this._message+": "+(e.performanceNow()-this._startTime)+" ms"),a&&this._log.info(a)}}])},{"./log/log.js":13,"./proto.js":15,"./utils/date.js":21}],15:[function(a,b){function c(a){return a&&"function"==typeof a}var d={},e=function(){};e.define=function(a){function b(a){d!=a&&c(this.$ctor)&&this.$ctor.apply(this,arguments)}function e(a,d,e){b.prototype[a]=c(d)&&c(e)?function(){return this._super=e,d.apply(this,arguments)}:d}if(!a||0===a.length)return this;var f,g,h=a[0];c(h)?(f=1<a.length?a[1]:{},f.$ctor=h,g=a[2]):(f=a[0],g=a[1]),b.prototype=new this(d);for(key in f)e(key,f[key],b.prototype[key]);b.prototype.constructor=b,b.extend=this.extend||this.define,b.mixin=this.mixin;for(key in g)b[key]=g[key];return b},e.mixin=function(a){e.mixinWith(this,a)},e.mixinWith=function(a,b){for(key in b)a.prototype[key]=b[key]},b.exports=e},{}],16:[function(a,b){"use strict";var c=a("./proto.js"),d=a("./utils/array.js");b.exports=c.define([function(){this._listeners=[]},{add:function(a,b){a&&(this._listenerExists(a,b)||this._listeners.push(new e(a,b)))},addOnce:function(a,b){a&&(this._listenerExists(a,b)||this._listeners.push(new e(a,b,!0)))},remove:function(a,b){for(var c=0;c<this._listeners.length;c++){var e,f=this._listeners[c];if(a?f.isSame(a,b)&&(e=!0):f.isSameContext(b)&&(e=!0),e&&(d.removeAt(this._listeners,c),a))return}},removeAll:function(){this._listeners=[]},trigger:function(){if(!this._disabled)for(var a=this._listeners.length-1;a>=0;a--){var b=this._listeners[a];b.trigger(arguments),b.onlyOnce&&d.removeAt(this._listeners,a)}},disable:function(a){void 0===a&&(a=!0),this._disabled=a},_listenerExists:function(a,b){for(var c=this._listeners.length-1;c>=0;c--){var d=this._listeners[c];if(d.isSame(a,b))return!0}return!1}}]);var e=c.define([function(a,b,c){this._callback=a,this._context=b,this.onlyOnce=c},{isSame:function(a,b){return b?this._callback===a&&this._context===b:this._callback===a},isSameContext:function(a){return this._context===a},trigger:function(a){this._callback.apply(this._context,a)}}])},{"./proto.js":15,"./utils/array.js":20}],17:[function(a,b){"use strict";var c=a("./storage.js");b.exports=new c(window.localStorage)},{"./storage.js":19}],18:[function(a,b){var c=a("./storage.js");b.exports=new c(window.sessionStorage)},{"./storage.js":19}],19:[function(a,b){"use strict";function c(a){return JSON.stringify(a)}function d(a){if(!g.isString(a))return null;try{return JSON.parse(a)}catch(b){return a}}function e(a){if(!a)return!1;var b="_recurve"+h.generateUUID();try{a.setItem(b,""),a.removeItem(b)}catch(c){return!1}return!0}var f=a("../utils/date.js"),g=a("../utils/object.js"),h=a("../utils/string.js"),i=a("../proto.js"),j=a("../cache.js"),k=a("../assert.js");b.exports=i.define([function(a,b,c){void 0===b&&(b=!0),this._storage=a,b&&(void 0===c&&(c=new j),this._cache=c),this.supported=e(this._storage)},{get:function(a){if(k(a,"key must be set"),!this.supported)return null;var b;return this._cache&&(b=this._cache.get(a))?b:(b=this._storage.getItem(a),b=d(b),this._cache&&this._cache.set(a,b),b)},set:function(a,b){if(k(a,"key must be set"),this.supported){void 0===b&&this.remove(a);var d=c(b);this._storage.setItem(a,d),this._cache&&this._cache.set(a,b)}},remove:function(a){return k(a,"key must be set"),this.supported?(this._cache&&this._cache.remove(a),this._storage.removeItem(a)):void 0},exists:function(a){return k(a,"key must be set"),this.supported&&this._storage.getItem(a)?!0:!1},clear:function(){this.supported&&(this._storage.clear(),this._cache&&this._cache.clear())},getWithExpiration:function(a){var b=this.get(a);if(!b)return null;var c=f.now()-b.time;return b.expiry<c?null:b.value},setWithExpiration:function(a,b,c){this.set(a,{value:b,expiry:c,time:f.now()})},forEach:function(a){if(k(a,"iterator must be set"),this.supported)for(var b in this._storage){var c=this.get(b);a(c,b)}},setCache:function(a){this._cache=a}}])},{"../assert.js":2,"../cache.js":3,"../proto.js":15,"../utils/date.js":21,"../utils/object.js":23,"../utils/string.js":24}],20:[function(a,b){"use strict";b.exports={removeItem:function(a,b){if(a){var c=a.indexOf(b);c>-1&&a.splice(c,1)}},removeAt:function(a,b){a&&b>=0&&a.length>b&&a.splice(b,1)},replaceItem:function(a,b){if(a){var c=a.indexOf(b);c>-1&&(a[c]=b)}},isEmpty:function(a){return!a||0===a.length},argumentsToArray:function(a,b){return b<a.length?Array.prototype.slice.call(a,b):[]}}},{}],21:[function(a,b){"use strict";b.exports={now:function(){return Date.now?Date.now():(new Date).getTime()},performanceNow:function(){return performance&&performance.now?performance.now():this.now()},addDaysFromNow:function(a){var b=new Date;return b.setDate(b.getDate()+a),b}}},{}],22:[function(a,b){"use strict";var c=a("./object.js");b.exports={createElement:function(a,b){var d=document.createElement(a);return c.forEach(b,function(a,b){d.setAttribute(b,a)}),d},elementSupportsOnEvent:function(a,b){return b in a}}},{"./object.js":23}],23:[function(a,b){"use strict";b.exports={forEach:function(a,b,c){if(a&&b){if(a.forEach&&a.forEach===Object.forEach)a.forEach(b,c);else if(this.isArray(a)&&a.length){for(var d=0;d<a.length;d++)if(!1===b.call(c,a[d],d,a))return}else for(var e=this.keys(a),d=0;d<e.length;d++){var f=e[d];if(!1===b.call(c,a[f],f,a))return}return e}},keys:function(a){if(!this.isObject(a))return[];if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},keyCount:function(a){if(!this.isObject(a))return 0;var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},areEqual:function(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(this.isNaN(a)&&this.isNaN(b))return!0;if(!this.isSameType(a,b))return!1;if(!this.isObject(a))return!1;if(!this.isArray(a)){if(this.isDate(a))return a.getTime()==b.getTime();var c={};for(var d in a)if(!this.isFunction(a[d])){if(!this.areEqual(a[d],b[d]))return!1;c[d]=!0}for(var d in b)if(!this.isFunction(b[d])&&!c.hasOwnProperty(d))return!1;return!0}if(a.length==b.length){for(var e=0;e<a.length;e++)if(!this.areEqual(a[e],b[e]))return!1;return!0}return!1},isNaN:function(a){return a!==a},isSameType:function(a,b){return typeof a==typeof b},isString:function(a){return a instanceof String||"string"==typeof a},isError:function(a){return a instanceof Error},isObject:function(a){return a===Object(a)},isArray:function(a){return a instanceof Array},isFunction:function(a){return"function"==typeof a},isDate:function(a){return a instanceof Date},isFile:function(){return"[object File]"===String(data)},isNumber:function(a){return"number"==typeof a},bind:function(a,b){if(!this.isFunction(a))throw new TypeError("not a function");if(Function.prototype.bind)return Function.prototype.bind.apply(a,Array.prototype.slice.call(arguments,1));var c=Array.prototype.slice.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(Array.prototype.slice.call(arguments)));bindCtor.prototype=a.prototype;var e=new bindCtor;bindCtor.prototype=null;var f=a.apply(e,c.concat(Array.prototype.slice.call(arguments)));return Object(f)===f?f:e};return d},extend:function(a,b){if(b){for(var c in b)a[c]=b[c];return a}},toJson:function(a){if(!this.isObject(a))throw new Error("not an object to convert to JSON");return JSON.stringify(a)},fromJson:function(a){return a?JSON.parse(a):null},toFormData:function(a){if(!a)return null;var b=[];return this.forEach(a,function(a,c){b.push(encodeURIComponent(c)+"="+encodeURIComponent(a))}),b.join("&")}}},{}],24:[function(a,b){"use strict";var c=(a("./object.js"),a("./date.js"));b.exports={format:function(a){if(!a)return null;Array.prototype.shift.apply(arguments);for(var b=0;b<arguments.length;b++){var c="{"+b+"}";a=a.replace(c,arguments[b])}return a},formatWithProperties:function(a,b){if(!a)return null;for(var c in b)if(b.hasOwnProperty(c)){var d="{"+c+"}";a=a.replace(d,b[c])}return a},pad:function(a,b,c){for(void 0===c&&(c="0"),a=String(a);a.length<b;)a=c+a;return a},formatTime:function(a){void 0===a&&(a=new Date);var b=this.pad(a.getHours(),2),c=this.pad(a.getMinutes(),2),d=this.pad(a.getSeconds(),2),e=this.pad(a.getMilliseconds(),2);return this.format("{0}:{1}:{2}:{3}",b,c,d,e)},formatMonthDayYear:function(a){if(!a)return"";var b=this.pad(a.getMonth()+1),c=this.pad(a.getDate()),d=a.getFullYear();return this.format("{0}/{1}/{2}",b,c,d)},formatYearRange:function(a,b){var c="";return c=a&&b?a+" - "+b:a?a:b},capitalizeFirstCharacter:function(a){return a?a.charAt(0).toUpperCase()+a.slice(1):null},hasValue:function(a){return a&&0<a.length},linesOf:function(a){var b;return a&&(b=a.split("\n")),b},isEqual:function(a,b,c){return a&&b?(c&&(a=a.toLowerCase(),b=b.toLowerCase()),a==b):a==b},isEqualIgnoreCase:function(a,b){return this.isEqual(a,b,!0)},contains:function(a,b,c){return a&&b?(c&&(a=a.toLowerCase(),b=b.toLowerCase()),0<=a.indexOf(b)):a==b},beforeSeparator:function(a,b){if(!a||!b)return null;var c=a.indexOf(b);return c>-1?a.substring(0,c):null},afterSeparator:function(a,b){if(!a||!b)return null;var c=a.indexOf(b);return c>-1?a.substring(c+1):null},generateUUID:function(){var a=c.now(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:7&c|8).toString(16)});return b}}},{"./date.js":21,"./object.js":23}],25:[function(a,b){"use strict";var c=a("./object.js"),d=a("./string.js");b.exports={urlLastPath:function(a){if(a){var b=a.split("/");return 0<b.length?b[b.length-1]:null}},addParametersToUrl:function(a,b){if(a&&b){var e=d.contains(a,"?")?"&":"?";for(var f in b){var g=b[f];c.isObject(g)&&(g=c.isDate(g)?g.toISOString():c.toJson(g)),a+=e+encodeURIComponent(f)+encodeURIComponent(b[f]),e="?"}return a}},removeParameterFromUrl:function(a,b){if(a&&b){var c=b+"=",d=a.indexOf(c);if(-1!==index){var e=a.indexOf("&",d);return a=e>-1?a.substr(0,Math.max(d-1,0))+a.substr(e):a.substr(0,Math.max(d-1,0))}}}}},{"./object.js":23,"./string.js":24}],26:[function(a,b){"use strict";b.exports={isFileProtocol:function(){return"file:"===window.location.protocol},globalEval:function(a){if(a){window.execScript&&window.execScript(a);var b=function(){window.eval.call(window.src)};b()}}}},{}]},{},[1,2,3,4,5,11,14,15,16]);